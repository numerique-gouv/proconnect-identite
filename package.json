{
  "name": "proconnect-identite",
  "version": "1.0.0",
  "private": true,
  "license": "MIT",
  "type": "module",
  "imports": {
    "#cypress/*": "./cypress/*.ts"
  },
  "main": "src/index.js",
  "workspaces": [
    "packages/core",
    "packages/crisp",
    "packages/debounce",
    "packages/devtools/typescript",
    "packages/email",
    "packages/entreprise",
    "packages/identite",
    "packages/testing"
  ],
  "scripts": {
    "build": "run-s build:**",
    "build:assets": "vite build --clearScreen false",
    "build:workspaces": "npm run build --if-present --workspaces",
    "build:db:conditionaly-load-fixtures": "if [ \"$RUN_FIXTURES\" = \"True\" ]; then npm run fixtures:load; fi",
    "build:db:migrate": "npm run --silent migrate -- up",
    "delete-database": "if [ \"$ENABLE_DATABASE_DELETION\" = \"True\" ]; then tsx scripts/run-sql-script.ts scripts/delete_all.sql; fi",
    "predev": "npm run build:workspaces",
    "dev": "NODE_ENV=development concurrently \"npm:watch:*(!node)\" \"npm:watch:node\"",
    "dev:test": "tsx --env-file=.env.test --test --watch test/**/*.test.ts",
    "clean": "npx -y del-cli build dist packages/*/dist packages/*/tsconfig*.tsbuildinfo",
    "e2e:setup": "tsx scripts/cypress-single-test-setup.ts",
    "e2e:run": "tsx scripts/cypress-single-test-run.ts",
    "fixtures:load": "npm run --silent build:db:migrate && tsx scripts/run-sql-script.ts scripts/fixtures.sql && npm run update-organization-info 0",
    "fixtures:load-ci": "tsx scripts/run-sql-script.ts",
    "lint": "prettier --write '**/*.ts'",
    "migrate": "dotenvx --quiet run --convention=flow -- node-pg-migrate",
    "start": "tsx --import ./src/instrument.ts src/index.ts",
    "test": "run-s test:*",
    "test:lint": "prettier '**/*.ts' --list-different",
    "test:type-check": "tsc --noEmit",
    "test:unit": "tsx --env-file=.env.test --test --test-reporter=spec test/**/*.test.ts",
    "test:workspaces": "npm run test --if-present --workspaces",
    "update-one-mocked-organization": "UPDATE_SNAPSHOT=True tsx mocks/entreprise.api.gouv.fr/add-establishment.ts",
    "update-organization-info": "tsx scripts/update-organizations-info.ts",
    "version": "changeset version && npm install --package-lock-only",
    "watch:assets": "NODE_ENV=development vite build --clearScreen false --watch",
    "watch:ejs": "CHOKIDAR_USEPOLLING=true copy-and-watch --clean --watch \"src/views/**/*.ejs\" src/views/*.ejs build/views/",
    "watch:js": "tsc --watch --preserveWatchOutput",
    "watch:node": "tsx --import ./src/instrument.ts --inspect --watch src/index.ts",
    "watch:workspaces:core": "npm run dev --if-present --workspace=@gouvfr-lasuite/proconnect.core",
    "watch:workspaces:crisp": "npm run dev --if-present --workspace=@gouvfr-lasuite/proconnect.crisp",
    "watch:workspaces:debounce": "npm run dev --if-present --workspace=@gouvfr-lasuite/proconnect.debounce",
    "watch:workspaces:email": "npm run dev --if-present --workspace=@gouvfr-lasuite/proconnect.email",
    "watch:workspaces:entreprise": "npm run dev --if-present --workspace=@gouvfr-lasuite/proconnect.entreprise",
    "watch:workspaces:identite": "npm run dev --if-present --workspace=@gouvfr-lasuite/proconnect.identite"
  },
  "prettier": {
    "plugins": [
      "prettier-plugin-organize-imports"
    ]
  },
  "dependencies": {
    "@gouvfr-lasuite/proconnect.core": "workspace:*",
    "@gouvfr-lasuite/proconnect.crisp": "workspace:*",
    "@gouvfr-lasuite/proconnect.debounce": "workspace:*",
    "@gouvfr-lasuite/proconnect.email": "workspace:*",
    "@gouvfr-lasuite/proconnect.entreprise": "workspace:*",
    "@gouvfr-lasuite/proconnect.identite": "workspace:*",
    "@gouvfr-lasuite/proconnect.testing": "workspace:*",
    "@sentry/node": "^9.12.0",
    "@sentry/profiling-node": "^9.12.0",
    "@simplewebauthn/browser": "^8.3.4",
    "@simplewebauthn/server": "^8.3.5",
    "@sunknudsen/totp": "^1.2.0",
    "await-to-js": "^3.0.0",
    "axios": "^1.8.4",
    "connect-redis": "^8.0.2",
    "console-log-level": "^1.4.1",
    "cookie-parser": "^1.4.7",
    "csrf-sync": "^4.1.0",
    "dotenv-flow": "^4.1.0",
    "ejs": "^3.1.10",
    "express": "^4.21.1",
    "express-basic-auth": "^1.2.1",
    "express-session": "^1.18.1",
    "helmet": "^8.1.0",
    "html-to-text": "^9.0.5",
    "http-errors": "^2.0.0",
    "ioredis": "^5.6.0",
    "lodash-es": "^4.17.21",
    "moment": "^2.30.1",
    "moment-timezone": "^0.5.48",
    "morgan": "^1.10.0",
    "nocache": "^4.0.0",
    "nodemailer": "^6.10.0",
    "oidc-provider": "^8.8.1",
    "pg": "^8.14.1",
    "qrcode": "^1.5.4",
    "rate-limiter-flexible": "^7.0.0",
    "tsx": "^4.19.3",
    "zod": "^3.23.8",
    "zod-validation-error": "^3.4.0"
  },
  "devDependencies": {
    "@changesets/changelog-github": "^0.5.1",
    "@changesets/cli": "^2.29.0",
    "@dotenvx/dotenvx": "^1.39.1",
    "@fullhuman/postcss-purgecss": "^7.0.2",
    "@gouvfr-lasuite/proconnect.devtools.typescript": "workspace:*",
    "@gouvfr/dsfr": "^1.13.1",
    "@kitajs/html": "^4.2.7",
    "@kitajs/ts-html-plugin": "^4.1.1",
    "@panva/jose": "^1.9.3",
    "@simplewebauthn/types": "^10.0.0",
    "@simplewebauthn/typescript-types": "^8.3.4",
    "@types/console-log-level": "^1.4.5",
    "@types/cookie-parser": "^1.4.8",
    "@types/ejs": "^3.1.5",
    "@types/express": "^4.17.21",
    "@types/express-session": "^1.18.1",
    "@types/html-to-text": "^9.0.4",
    "@types/http-errors": "^2.0.4",
    "@types/lodash": "^4.17.16",
    "@types/lodash-es": "^4.17.12",
    "@types/morgan": "^1.9.9",
    "@types/node": "^22.14.1",
    "@types/nodemailer": "^6.4.17",
    "@types/oidc-provider": "^8.8.1",
    "@types/qrcode": "^1.5.5",
    "axe-core": "^4.10.3",
    "concurrently": "^9.1.2",
    "copy-and-watch": "^0.1.8",
    "csv": "^6.3.9",
    "cypress": "^14.2.1",
    "cypress-axe": "^1.6.0",
    "cypress-maildev": "^1.3.2",
    "lodash": "^4.17.21",
    "nock": "^14.0.3",
    "node-pg-migrate": "^7.9.1",
    "npm-run-all2": "^7.0.2",
    "prettier": "^3.5.3",
    "prettier-plugin-organize-imports": "^4.1.0",
    "tld-extract": "^2.1.0",
    "typescript": "^5.8.3",
    "vite": "^6.2.6",
    "zx": "^8.5.0"
  },
  "packageManager": "npm@11.2.0+sha512.3dc9c50ba813a3d54393155a435fe66404b72685ab0e3008f9ae9ed8d81f6104860f07ed2656dd5748c1322d95f3140fa9b19c59a6bba7750fd12285f81866da",
  "engines": {
    "node": "^22.13.1"
  }
}
